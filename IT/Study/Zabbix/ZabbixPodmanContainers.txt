Working Installation Summary

Zabbix Server 7.4 + PostgreSQL 15 + TimescaleDB + Podman on AlmaLinux 10

--- 1Ô∏è‚É£ Host Preparation
$ sudo dnf install -y podman podman-compose

SELinux stays ENFORCING (no changes needed).

--- 2Ô∏è‚É£ Directory Layout
$ mkdir -p ~/zabbix7
$ cd ~/zabbix7
$ mkdir pgdata

--- 3Ô∏è‚É£ Single Podman Compose File (Critical)

One file, one network, service-name DNS

Create docker-compose.yml:

version: "3.9"

services:
  postgres:
    image: docker.io/timescale/timescaledb:latest-pg15
    container_name: zabbix_pg
    restart: unless-stopped
    environment:
      POSTGRES_DB: zabbix
      POSTGRES_USER: zabbix
      POSTGRES_PASSWORD: ChangeMeSecure!
      TS_TUNE_MEMORY: 2GB
      TS_TUNE_NUM_CPUS: 2
    volumes:
      - ./pgdata:/var/lib/postgresql/data:Z
    command: >
      postgres
      -c max_connections=300
      -c shared_buffers=1GB
      -c listen_addresses='*'
    ports:
      - "5432:5432"

  zabbix-server:
    image: docker.io/zabbix/zabbix-server-pgsql:alpine-7.4-latest
    container_name: zabbix_server
    restart: unless-stopped
    depends_on:
      - postgres
    environment:
      DB_SERVER_HOST: postgres
      POSTGRES_DB: zabbix
      POSTGRES_USER: zabbix
      POSTGRES_PASSWORD: ChangeMeSecure!
    ports:
      - "10051:10051"

  zabbix-web:
    image: docker.io/zabbix/zabbix-web-nginx-pgsql:alpine-7.4-latest
    container_name: zabbix_web
    restart: unless-stopped
    depends_on:
      - zabbix-server
    environment:
      DB_SERVER_HOST: postgres
      POSTGRES_DB: zabbix
      POSTGRES_USER: zabbix
      POSTGRES_PASSWORD: ChangeMeSecure!
      ZBX_SERVER_HOST: zabbix-server
      PHP_TZ: UTC
    ports:
      - "8080:8080"

--- 4Ô∏è‚É£ Start PostgreSQL First (Clean Init)
podman compose down
rm -rf pgdata
podman compose up -d postgres


Wait for:

podman logs zabbix_pg --tail=20

database system is ready to accept connections

--- 5Ô∏è‚É£ Enable TimescaleDB (Before Schema)
podman exec -it zabbix_pg psql -U zabbix -d zabbix \
  -c "CREATE EXTENSION IF NOT EXISTS timescaledb;"


Verify:

podman exec -it zabbix_pg psql -U zabbix -d zabbix \
  -c "SELECT extname FROM pg_extension;"

--- 6Ô∏è‚É£ Import Zabbix 7.4 Schema (From Host)
curl -O https://cdn.zabbix.com/zabbix/sources/stable/7.4/zabbix-7.4.0.tar.gz
tar xzf zabbix-7.4.0.tar.gz

cd zabbix-7.4.0/database/postgresql

psql -h localhost -U zabbix -d zabbix -f schema.sql
psql -h localhost -U zabbix -d zabbix -f images.sql
psql -h localhost -U zabbix -d zabbix -f data.sql

--- 7Ô∏è‚É£ Start Zabbix Server + Web
cd ~/zabbix7
podman compose up -d


Check:

podman ps


Expected:

zabbix_pg
zabbix_server
zabbix_web

--- 8Ô∏è‚É£ Access Zabbix

Browser:

http://<host-ip>:8080


Login:

User	Password
Admin	zabbix
--- 9Ô∏è‚É£ (Optional but Recommended) Convert to TimescaleDB Hypertables
podman exec -it zabbix_pg psql -U zabbix -d zabbix

SELECT create_hypertable('history', 'clock', migrate_data => true);
SELECT create_hypertable('history_uint', 'clock', migrate_data => true);
SELECT create_hypertable('history_str', 'clock', migrate_data => true);
SELECT create_hypertable('history_text', 'clock', migrate_data => true);
SELECT create_hypertable('history_log', 'clock', migrate_data => true);
SELECT create_hypertable('trends', 'clock', migrate_data => true);
SELECT create_hypertable('trends_uint', 'clock', migrate_data => true);

üîë Key Lessons (Why This Worked)

‚úî Use TimescaleDB image, not vanilla PostgreSQL

‚úî Use valid Zabbix image tags (alpine-7.4-latest)

‚úî Use one compose file

‚úî Use service names for DB host (postgres)

‚úî Use SELinux :Z on volumes

‚úî Do NOT replace full postgresql.conf

‚úî Increase connections via -c max_connections

‚úî Enable TimescaleDB before schema import

üéØ Final Result

Zabbix Server 7.4 running

PostgreSQL 15 + TimescaleDB enabled

Stable startup

No connection exhaustion

AlmaLinux 10 + Podman compliant
